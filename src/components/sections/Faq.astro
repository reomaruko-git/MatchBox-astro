---
// Faq.astro - Props対応版
//
// 【最小構成】デフォルトのまま使う
//   <Faq />
//
// 【カスタム構成】中身をページごとに差し替える
//   <Faq items={myFaqs} title="よくある質問" />

export interface FaqItem {
  question: string;
  answer:   string;
}

export interface Props {
  label?:    string;
  title?:    string;
  subtitle?: string;
  items?:    FaqItem[];
  bgColor?:  string;
}

const {
  label    = "FAQ",
  title    = "よくある質問",
  subtitle,
  items    = [
    {
      question: "追加料金はかかりますか？",
      answer:   "初回登録・相談は無料です。費用が発生する場合は事前に明示しますので、ご安心ください。",
    },
    {
      question: "すぐに始められますか？",
      answer:   "はい。お申し込み後、最短即日でご利用を開始いただけます。",
    },
    {
      question: "解約はいつでもできますか？",
      answer:   "はい。契約期間の縛りはなく、マイページからいつでも解約できます。違約金も一切かかりません。",
    },
  ],
  bgColor  = "#f8f6f2",
} = Astro.props;
---

<section class="faq-section" style={`background: ${bgColor};`}>
  <div class="container">

    <div class="section-header">
      <span class="section-label">{label}</span>
      <h2 class="section-title">{title}</h2>
      {subtitle && <p class="section-subtitle">{subtitle}</p>}
    </div>

    <div class="faq-list">
      {items.map((item, i) => (
        <details class="faq-item" id={`faq-${i}`}>
          <summary class="faq-question">
            <span class="q-mark">Q</span>
            <span class="q-text">{item.question}</span>
            <span class="faq-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
          </summary>
          <div class="faq-answer">
            <span class="a-mark">A</span>
            <p class="a-text" set:html={item.answer} />
          </div>
        </details>
      ))}
    </div>

  </div>
</section>

<style>
  .faq-section {
    padding: 80px 0 96px;
    font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', sans-serif;
  }
  .container { max-width: 760px; margin: 0 auto; padding: 0 24px; }

  /* ── Header ── */
  .section-header { text-align: center; margin-bottom: 48px; }
  .section-label {
    display: inline-block;
    font-size: 11px; font-weight: 700; letter-spacing: .25em;
    color: #e07b39; background: #fef3ea; border: 1px solid #f5c49a;
    padding: 4px 16px; border-radius: 100px; margin-bottom: 14px;
  }
  .section-title    { font-size: clamp(22px, 4vw, 32px); font-weight: 700; color: #1a1a2e; margin: 0 0 10px; line-height: 1.35; }
  .section-subtitle { font-size: 14px; color: #6b7280; margin: 0; }

  /* ── List ── */
  .faq-list { display: flex; flex-direction: column; gap: 12px; }

  /* ── Item ── */
  .faq-item {
    background: #fff;
    border: 1px solid #ede8e0;
    border-radius: 14px;
    overflow: hidden;
    transition: box-shadow .2s ease;
  }
  .faq-item[open] { box-shadow: 0 4px 20px rgba(0,0,0,.07); }
  .faq-item[open] .faq-icon { transform: rotate(180deg); color: #e07b39; }

  /* ── Question ── */
  .faq-question {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 18px 20px;
    cursor: pointer;
    list-style: none;
    user-select: none;
  }
  .faq-question::-webkit-details-marker { display: none; }
  .faq-question:hover { background: #fdf9f5; }

  .q-mark {
    flex-shrink: 0;
    width: 30px; height: 30px;
    background: #e07b39; color: #fff;
    border-radius: 8px;
    font-size: 14px; font-weight: 800;
    display: flex; align-items: center; justify-content: center;
  }
  .q-text {
    flex: 1;
    font-size: 15px; font-weight: 700; color: #1a1a2e; line-height: 1.5;
  }
  .faq-icon {
    flex-shrink: 0;
    width: 20px; height: 20px;
    color: #9ca3af;
    transition: transform .25s ease, color .2s ease;
  }
  .faq-icon svg { width: 100%; height: 100%; }

  /* ── Answer ── */
  .faq-answer {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    padding: 0 20px 18px;
    border-top: 1px solid #f0ece6;
    margin-top: 0;
    animation: fadeDown .2s ease;
  }
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-4px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .a-mark {
    flex-shrink: 0;
    width: 30px; height: 30px;
    margin-top: 2px;
    background: #f5f0ea; color: #e07b39;
    border-radius: 8px;
    font-size: 14px; font-weight: 800;
    display: flex; align-items: center; justify-content: center;
  }
  .a-text {
    flex: 1;
    font-size: 14px; color: #4b5563; line-height: 1.85; margin: 0;
    padding-top: 4px;
  }

  /* ── Mobile ── */
  @media (max-width: 640px) {
    .faq-section  { padding: 60px 0 72px; }
    .q-text       { font-size: 14px; }
  }
</style>
